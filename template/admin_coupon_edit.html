{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Edit Coupon</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/admin_coupon_edit.css' %}">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
  </head>
  <body>
    <div class="container-fluid">
      <!-- Sidebar -->
      <nav class="sidebar">
        <div class="brand">meatsouk</div>
        <ul>
          <li><a href="{% url 'admin_page' %}">Dashboard</a></li>
                <li><a href="{% url 'user_page' %}">Users</a></li>
                <li><a href="{% url 'admin_category' %}">Category</a></li>
                <li><a href="{% url 'admin_product_view' %}">Products</a></li>
                <li><a href="{% url 'admin_order_list' %}">Orders</a></li>
                <li><a href="{% url 'coupon' %}">Coupons</a></li>
                <li><a href="{% url 'admin_offer_management' %}">Offer</a></li>
                <li><a href="{% url 'admin_pincode' %}">Pin code</a></li>
                <li><a href="{% url 'sales_report' %}">Sales reprot</a></li>
      </ul>
      </nav>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Header -->
        <header>
          <div class="search-bar">
            <input type="text" placeholder="Search for something">
          </div>
          <div class="user-section">
            <div class="logout-btn">
              <a href="{% url 'admin_logout' %}">LOGOUT</a>
            </div>
            <div class="user-image">
              <img src="{% static 'images/Ms_logo.jpg' %}" alt="User">
            </div>
          </div>
        </header>

        <div class="content-wrapper">
          <!-- Edit Coupon Form -->
          <div class="row">
            <div class="col-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Edit Coupon</h4>
                  {% if messages %}
                      <div class="container mt-3">
                          {% for message in messages %}
                              <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %} alert-dismissible fade show" role="alert">
                                  {{ message }}
                                  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                      <span aria-hidden="true">&times;</span>
                                  </button>
                              </div>
                          {% endfor %}
                      </div>
                  {% endif %}
                  <form method="POST" action="">
                    {% csrf_token %}
                    <div class="form-group">
                      <label for="code">Coupon Code</label>
                      <input type="text" class="form-control" id="code" name="code" maxlength="30" value="{{ coupon.code }}" required>
                    </div>
                    <div class="form-group">
                      <label for="discount_value">Discount Value</label>
                      <input type="number" step="0.01" class="form-control" id="discount_value" name="discount_value" max="9999999999" value="{{ coupon.discount_value }}" required>
                    </div>
                    <div class="form-group">
                      <label for="minimum_purchase_amount">Minimum Purchase Amount</label>
                      <input type="number" step="0.01" class="form-control" id="minimum_purchase_amount" name="minimum_purchase_amount" max="9999999999" value="{{ coupon.minimum_purchase_amount }}" required>
                    </div>
                    <div class="form-group">
                      <label for="valid_from">Valid From</label>
                      <input type="text" class="form-control datepicker" id="valid_from" name="valid_from" value="{{ coupon.valid_from|date:'Y-m-d' }}" required>
                    </div>
                    <div class="form-group">
                      <label for="valid_upto">valid_upto</label>
                      <input type="text" class="form-control datepicker" id="valid_upto" name="valid_upto" value="{{ coupon.valid_upto|date:'Y-m-d' }}" required>
                    </div>
                    <div class="form-group">
                      <label for="coupon_limit">Coupon Limit</label>
                      <input type="number" class="form-control" id="coupon_limit" name="coupon_limit" value="{{ coupon.coupon_limit }}" min="1" required>
                    </div>
                    <div class="form-footer">
                      <a href="{% url 'coupon' %}" class="btn btn-secondary">Cancel</a>
                      <button type="submit" class="btn btn-primary">Update Coupon</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    
    <!-- Initialize datepicker -->
    <script>
      $(document).ready(function() {
        $('.datepicker').datepicker({
          format: 'yyyy-mm-dd',
          autoclose: true,
          todayHighlight: true
        });
      });
    </script>
  </body>
</html>